"use strict";var bodyParser=require("body-parser"),express=require("express"),app=express(),dotenv=require("dotenv").config(),port=process.env.PORT,axios=require("axios");app.set("view engine","pug"),app.use(bodyParser.urlencoded({extended:!0})),app.use(express.static("public")),app.get("/",function(e,r){r.render("index",{title:"Qui prend quoi ?"})}),app.post("/party",function(e,t){axios.post("".concat(process.env.API_URL,"/party"),e.body).then(function(e){var r=e.data;return t.redirect("/party/".concat(r._id))}).catch(function(e){return t.send(e)})}),app.get("/party/:id",function(e,t){axios.get("".concat(process.env.API_URL,"/party/").concat(e.params.id)).then(function(e){var r=e.data;return t.render("party",{party:r,title:r.name,url:"".concat(process.env.FRONT_URL,":").concat(process.env.PORT,"/party/").concat(r._id)})}).catch(function(e){return console.log(e)})}),app.listen(port,function(){return console.log("Front app listening on port ".concat(port,"!"))});